#!/usr/bin/env ruby

require 'spider-gazelle'
SpiderGazelle::LaunchControl.instance.exec(ARGV)


# Modes:
# =====
# * Spider
# * Gazelle
# * Signaller


# Spider:
# ======
# * Mount application on port (process, thread or no_ipc)
# ** Process by default
# ** Thread for jRuby, Rubinius
# ** no_ipc for windows (if application is undesirable)

# * Reload application (process only)
# ** Spin up new application
# ** Signal existing application to shutdown once requests complete
# ** Start sending sockets to the new application

# * Reload spider (and applications)
# ** Spin up a new spider with takeover details
# ** If password accepted then send sockets with application details to new spider
# ** Signal existing applications to shutdown once requests complete
# ** Shutdown once all gazelles close


# Gazelle:
# =======
# * Load application
# * Contact Spider
# * Inform spider of load result
# * Accept STD IO from spider for logging
# * Accept sockets


# Signaller:
# =========
# * Connects to spider
# * Sends request options

